dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2011-04-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
dygraph(ets_mod_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2011-04-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
dygraph(arima_mod_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2011-04-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array <- gen_array2(ets_mod1, arima_mod1)
gen_array2 <- function(model1, model2){
forecast_obj1 <- forecast(model1)
forecast_obj2 <- forecast(model2)
actuals <- forecast_obj1$x
forecast1 <- forecast_obj1$mean
forecast2 <- forecast_obj2$mean
cbind(actuals, forecast1, forecast2)
}
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2011-04-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2011-04-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
ets_mod1$x
ets_mod1$x %>% tail
unr2 <- tail(unr, -3)
tail(unr)
tail(unr2)
head(unr)
head(unr2)
unr2 <- head(unr, -3)
ets_mod1 <- forecast::ets(unr2)
arima_mod1 <- forecast::auto.arima(unr2)
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
fr1 <- forecast(ets_mod1)
fr1
head(fr1)
tail(fr1)
fr1
ets_mod1
ets_mod1$x
fr1
fr2 <- forecast(arima_mod1)
fr2
class(fr1)
fr1$mean
cbind(unr, fr1$mean, fr2$mean)
plot_array2 <- cbind(unr, fr1$mean, fr2$mean)
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
fr1$mean
fr2$mean
plot_array2 <- cbind(unr, fr1$mean, fr2$mean)
View(plot_array2)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
glimpse(plot_array2)
names(unr2)
time(unr2)
plot_array2$date <- as.yearmon(time(unr))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
View(plot_array2)
head(plot_array2)
head(rowSums(plot_array2))
head(rowSums(plot_array2$fr1.mean))
head(rowSums(matrix(plot_array2$fr1.mean)))
?rowSums
head(rowSums(matrix(plot_array2)))
head(rowSums(matrix(is.na(plot_array2))))
is.na(plot_array2)
is.na(plot_array2) %>% head
is.na(plot_array2) %>% head %>% sum
is.na(plot_array2) %>% head %>% rowSums
table(rowSums(is.na(plot_array2)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
filt3
forecast_compare <- plot_array2[filt3]
library(zoo)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
forecast_compare <- plot_array2[filt3,]
forecast_compare
forecast_compare <- forecast_compare %>%
mutate(mod1_err = unr - fr1.mean,
mod1_err = unr - fr2.mean)
forecast_compare
forecast_compare <- forecast_compare %>%
mutate(mod1_err = unr - fr1.mean,
mod2_err = unr - fr2.mean)
forecast_compare
forecast_compare %>%
select(date, mod1_err, mod2_err) %>%
melt(id.vars = 'date')
forecast_compare %>%
select(date, mod1_err, mod2_err) %>%
reshape2::melt(id.vars = 'date')
forecast_compare %>%
select(date, mod1_err, mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(stat='identity')
forecast_compare %>%
select(date, mod1_err, mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
forecast_compare %>%
select(date, abs(mod1_err),abs(mod2_err)) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
forecast_compare %>%
select(date, abs(mod1_err),abs(mod2_err))
?abs
forecast_compare %>%
select(as.character(date), abs(mod1_err),abs(mod2_err)) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
forecast_compare %>%
select(as.character(date), abs(mod1_err),abs(mod2_err)) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
library(zoo)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
forecast_compare <- plot_array2[filt3,]
forecast_compare <- forecast_compare %>%
mutate(mod1_err = unr - fr1.mean,
mod2_err = unr - fr2.mean)
forecast_compare %>%
select(as.character(date), abs(mod1_err),abs(mod2_err)) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=date, y=value, fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
forecast_compare %>%
select(as.character(date), mod1_err,mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=as.character(date), y=abs(value), fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
forecast_compare %>%
select(date, mod1_err,mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=as.character(date), y=abs(value), fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
library(forecast)
library(fredr)
library(zoo)
library(tidyverse)
library(dygraphs)
fredr_key("0e510a57a0086df706ac9c8fb852b706")
unr <- fredr_series(series_id='UNRATE')
unr2 <- data.frame(unemp=as.matrix(unr),
date=as.yearmon(time(unr)))
unr2$diff_unemp <- c(NA, diff(unr2$unemp, 1))
dygraph(unr, main='Unemployment Rate') %>%
dyRangeSelector() %>%
dySeries(label='Unemployment Rate', color='black') %>%
dyHighlight(highlightCircleSize=4,hideOnMouseOut=F) %>%
dyCrosshair(direction = "vertical") %>%
dyRangeSelector(dateWindow = c("2000-01-01", '2017-10-01'))
dygraph(diff(unr, 1), main='Unemployment Rate, first difference') %>%
dyRangeSelector() %>%
dySeries(label='Unemployment Rate', color='black') %>%
dyHighlight(highlightCircleSize=4,hideOnMouseOut=F) %>%
dyCrosshair(direction = "vertical") %>%
dyRangeSelector(dateWindow = c("2000-01-01", '2017-10-01'))
unr2 <- head(unr, -3)
ets_mod1 <- forecast::ets(unr2)
arima_mod1 <- forecast::auto.arima(unr2)
gen_array2 <- function(model1, model2){
forecast_obj1 <- forecast(model1)
forecast_obj2 <- forecast(model2)
actuals <- forecast_obj1$x
forecast1 <- forecast_obj1$mean
forecast2 <- forecast_obj2$mean
cbind(actuals, forecast1, forecast2)
}
fr1 <- forecast(ets_mod1)
fr2 <- forecast(arima_mod1)
library(zoo)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
forecast_compare <- plot_array2[filt3,]
forecast_compare <- forecast_compare %>%
mutate(mod1_err = unr - fr1.mean,
mod2_err = unr - fr2.mean)
forecast_compare %>%
select(date, mod1_err,mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=as.character(date), y=abs(value), fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
plot_array <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'ETS Mod') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array2 <- gen_array2(ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'Model forecasts') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
plot_array2 <- gen_array2(unr, ets_mod1, arima_mod1)
plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
plot_array2 <- gen_array2(ets_mod1, arima_mod1)
plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
cbind(unr, forecast1, forecast2)
gen_array2 <- function(model1, model2){
forecast_obj1 <- forecast(model1)
forecast_obj2 <- forecast(model2)
actuals <- forecast_obj1$x
forecast1 <- forecast_obj1$mean
forecast2 <- forecast_obj2$mean
cbind(unr, forecast1, forecast2)
}
fr1 <- forecast(ets_mod1)
fr2 <- forecast(arima_mod1)
library(zoo)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
forecast_compare <- plot_array2[filt3,]
plot_array2 <- gen_array2(ets_mod1, arima_mod1)
plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
plot_array2 <- gen_array2(ets_mod1, arima_mod1)
#plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'Model forecasts') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(#colors = c("#266DD3","23F0C7"),
axisLineColor = "navy", gridLineColor = "grey")
?dyOptions
#plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'Model forecasts') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(drawPoints=T,
axisLineColor = "navy", gridLineColor = "grey")
#plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'Model forecasts') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2019-4-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(drawPoints=T, pointSize=3,
axisLineColor = "navy", gridLineColor = "grey")
head(unr, -3)
head(head(unr, -3))
head(head(unr, -2))
tail(head(unr, -3))
tail(head(unr, -2))
ets_mod2 <- forecast::ets(head(unr, -2))
ets_mod2
ets_mod2$x
ets_mod2$x %>% tail
ets_mod3 <- forecast::ets(heat(unr, -1))
head(unr, -1)
head(unr, -1) %>% tail
head(unr, -2) %>% tail
# rolling ets model
ets_mod2 <- forecast::ets(head(unr, -2))
ets_mod3 <- forecast::ets(head(unr, -1))
library(forecast)
library(fredr)
library(zoo)
library(tidyverse)
library(dygraphs)
fredr_key("0e510a57a0086df706ac9c8fb852b706")
unr <- fredr_series(series_id='UNRATE')
unr2 <- data.frame(unemp=as.matrix(unr),
date=as.yearmon(time(unr)))
unr2$diff_unemp <- c(NA, diff(unr2$unemp, 1))
dygraph(unr, main='Unemployment Rate') %>%
dyRangeSelector() %>%
dySeries(label='Unemployment Rate', color='black') %>%
dyHighlight(highlightCircleSize=4,hideOnMouseOut=F) %>%
dyCrosshair(direction = "vertical") %>%
dyRangeSelector(dateWindow = c("2000-01-01", '2017-10-01'))
dygraph(diff(unr, 1), main='Unemployment Rate, first difference') %>%
dyRangeSelector() %>%
dySeries(label='Unemployment Rate', color='black') %>%
dyHighlight(highlightCircleSize=4,hideOnMouseOut=F) %>%
dyCrosshair(direction = "vertical") %>%
dyRangeSelector(dateWindow = c("2000-01-01", '2017-10-01'))
unr2 <- head(unr, -3)
ets_mod1 <- forecast::ets(unr2)
arima_mod1 <- forecast::auto.arima(unr2)
gen_array2 <- function(model1, model2){
forecast_obj1 <- forecast(model1)
forecast_obj2 <- forecast(model2)
actuals <- forecast_obj1$x
forecast1 <- forecast_obj1$mean
forecast2 <- forecast_obj2$mean
cbind(unr, forecast1, forecast2)
}
# rolling ets model
ets_mod2 <- forecast::ets(head(unr, -2))
ets_mod3 <- forecast::ets(head(unr, -1))
fr1 <- forecast(ets_mod1)
fr2 <- forecast(arima_mod1)
library(zoo)
plot_array2 <- data.frame(cbind(unr, fr1$mean, fr2$mean))
plot_array2$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
filt3 <- which(rowSums(is.na(plot_array2))==0)
forecast_compare <- plot_array2[filt3,]
plot_array2 <- gen_array2(ets_mod1, arima_mod1)
#plot_array2 <- cbind(unr, ets_mod1, arima_mod1)
dygraph(plot_array2, main = 'Model forecasts') %>%
dyRangeSelector() %>%
dyRangeSelector(height = 40,
dateWindow = c("2015-01-01", "2018-8-01")) %>%
#dySeries(name = "actuals", label = "actual") %>%
#dySeries(c("lower","point_forecast","upper"), label = "Predicted") %>%
dyLegend(show = "always", hideOnMouseOut = FALSE) %>%
dyHighlight(highlightCircleSize = 5,
highlightSeriesOpts = list(strokeWidth = 2)) %>%
dyCrosshair(direction = "vertical") %>%
dyOptions(drawPoints=T, pointSize=3,
axisLineColor = "navy", gridLineColor = "grey")
forecast_compare <- forecast_compare %>%
mutate(mod1_err = unr - fr1.mean,
mod2_err = unr - fr2.mean)
forecast_compare %>%
select(date, mod1_err,mod2_err) %>%
reshape2::melt(id.vars = 'date') %>%
ggplot(aes(x=as.character(date), y=abs(value), fill=variable)) +
geom_bar(position = 'dodge', stat='identity')
fr1
?ets
ets_fr1 <- forecast(ets_mod1)
ets_fr2 <- forecast(ets_mod2)
ets_fr3 <- forecast(ets_mod3)
rolling_ets_fr <- cbind(unr, ets_fr1$mean, ets_fr2$mean, ets_fr3$mean)
View(rolling_ets_fr)
glimpse(rolling_ets_fr)
rolling_ets_fr$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
glimpse(rolling_ets_fr)
ets_fr1 <- forecast(ets_mod1)
ets_fr2 <- forecast(ets_mod2)
ets_fr3 <- forecast(ets_mod3)
rolling_ets_fr <- data.frame(cbind(unr, ets_fr1$mean, ets_fr2$mean, ets_fr3$mean))
rolling_ets_fr$date <- c(as.yearmon(time(unr)), rep(NA, nrow(plot_array2) - length(unr)))
rolling_ets_fr$date <- c(as.yearmon(time(unr)), rep(NA, nrow(rolling_ets_fr) - length(unr)))
glimpse(rolling_ets_fr)
View(rolling_ets_fr)
rolling_ets_fr %>% filter(date %in% c('Sep 2017','Oct 2017','Nov 2017'))
rolling_ets_fr %>% filter(date %in% as.yearmon(c('Sep 2017','Oct 2017','Nov 2017')))
rolling_ets_fr <- rolling_ets_fr %>%
filter(date %in% as.yearmon(c('Sep 2017','Oct 2017','Nov 2017')))
is.na(rolling_ets_fr)
rolling_ets_fr <- reshape2::melt(rolling_ets_fr,
id.vars = 'date')
rolling_ets_fr
ets_fr1 <- forecast(ets_mod1)
ets_fr2 <- forecast(ets_mod2)
ets_fr3 <- forecast(ets_mod3)
rolling_ets_fr <- data.frame(cbind(unr, ets_fr1$mean, ets_fr2$mean, ets_fr3$mean))
rolling_ets_fr$date <- c(as.yearmon(time(unr)), rep(NA, nrow(rolling_ets_fr) - length(unr)))
rolling_ets_fr
ets_fr1 <- forecast(ets_mod1)
ets_fr2 <- forecast(ets_mod2)
ets_fr3 <- forecast(ets_mod3)
rolling_ets_fr <- data.frame(cbind(unr, ets_fr1$mean, ets_fr2$mean, ets_fr3$mean))
rolling_ets_fr$date <- c(as.yearmon(time(unr)), rep(NA, nrow(rolling_ets_fr) - length(unr)))
rolling_ets_fr <- rolling_ets_fr %>%
filter(date %in% as.yearmon(c('Sep 2017','Oct 2017','Nov 2017')))
rolling_ets_fr
map_dbl(rolling_ets_fr, function(x) max(which(is.na(x))))
rolling_ets_fr2 <- reshape2::melt(rolling_ets_fr,
id.vars = 'date')
